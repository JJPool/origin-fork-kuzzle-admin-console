webpackJsonp([22],{249:function(s,e,t){var a=t(0)(t(627),t(797),null,null);s.exports=a.exports},627:function(s,e,t){"use strict";function a(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(e,"__esModule",{value:!0});var r=t(6),i=a(r),n=t(19),o=function(s){if(s&&s.__esModule)return s;var e={};if(null!=s)for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t]);return e.default=s,e}(n),l=t(43),c=a(l);e.default={name:"Signup",components:{EnvironmentSwitch:c.default},data:function(){return{username:"",password1:"",password2:"",reset:!1,error:null,waiting:!1}},methods:{signup:function(){var s=this;return""===this.username||""===this.password1||""===this.password2?void(this.error="All fields are mandatory"):this.password1!==this.password2?void(this.error="Password does not match"):(this.error=null,this.waiting=!0,void i.default.queryPromise({controller:"security",action:"createFirstAdmin"},{_id:this.username,reset:this.reset,body:{username:this.username,password:this.password1}}).then(function(){s.$store.commit(o.SET_ADMIN_EXISTS,!0),s.$router.push({name:"Login"})}).catch(function(e){console.error("An error occurred while creating the first admin",e),s.$router.push({name:"Login"})}))},editEnvironment:function(s){this.$emit("environment::create",s)}}}},797:function(s,e,t){s.exports={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"signup"},[t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col card wrapper s10 offset-s1 m8 offset-m2 l6 offset-l3"},[s._m(0),s._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col offset-s4 s2"},[t("environment-switch",{on:{"environment::create":s.editEnvironment}})],1)]),s._v(" "),s._m(1),s._v(" "),t("div",{staticClass:"row"},[t("form",{staticClass:"col s10 offset-s1",attrs:{id:"loginForm",method:"post"},on:{submit:function(e){e.preventDefault(),s.signup(e)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"input-field col s12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],staticClass:"validate",attrs:{id:"username",type:"text",name:"username",required:""},domProps:{value:s.username},on:{input:function(e){e.target.composing||(s.username=e.target.value)}}}),s._v(" "),t("label",{attrs:{for:"username"}},[s._v("Username")])])]),s._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"input-field col s12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.password1,expression:"password1"}],staticClass:"validate",attrs:{type:"password",name:"password1",id:"pass1",required:""},domProps:{value:s.password1},on:{input:function(e){e.target.composing||(s.password1=e.target.value)}}}),s._v(" "),t("label",{attrs:{for:"pass1"}},[s._v("Password")])])]),s._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"input-field col s12"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.password2,expression:"password2"}],staticClass:"validate",attrs:{type:"password",name:"password2",id:"pass2",required:""},domProps:{value:s.password2},on:{input:function(e){e.target.composing||(s.password2=e.target.value)}}}),s._v(" "),t("label",{attrs:{for:"pass2"}},[s._v("Password (confirmation)")])])]),s._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"input-field col s12 reset"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.reset,expression:"reset"}],staticClass:"filled-in",attrs:{type:"checkbox",id:"reset"},domProps:{checked:Array.isArray(s.reset)?s._i(s.reset,null)>-1:s.reset},on:{__c:function(e){var t=s.reset,a=e.target,r=!!a.checked;if(Array.isArray(t)){var i=s._i(t,null);r?i<0&&(s.reset=t.concat(null)):i>-1&&(s.reset=t.slice(0,i).concat(t.slice(i+1)))}else s.reset=r}}}),s._v(" "),t("label",{attrs:{for:"reset"}},[s._v("Reset default and anonymous rights?")])])]),s._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col m6"},[t("p",{staticClass:"message error"},[s._v(s._s(s.error))])]),s._v(" "),t("div",{staticClass:"col m6"},[s.waiting?t("div",{staticClass:"preloader-wrapper active right"},[s._m(2)]):s._e(),s._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:!s.waiting,expression:"!waiting"}],staticClass:"btn waves-effect waves-light right",attrs:{type:"submit",name:"action"}},[s._v("\n                  Create my first admin\n                ")])])])])])])])])])},staticRenderFns:[function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col s12"},[a("h2",{staticClass:"center-align logo"},[a("img",{staticStyle:{width:"60%"},attrs:{src:t(44),alt:"Welcome to the Kuzzle Backoffice"}})])])])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"row message-warning"},[t("h5",[s._v("First admin creation")]),s._v(" "),t("div",{staticClass:"divider"}),s._v(" "),t("div",{staticClass:"message"},[t("i",{staticClass:"fa fa-warning"}),s._v("\n            If you want to secure your Kuzzle, you have to check the "),t("em",[s._v('"reset"')]),s._v(" checkbox.\n            If you do so, be sure to configure default and anonymous roles afterward.\n          ")])])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"spinner-layer"},[t("div",{staticClass:"circle-clipper left"},[t("div",{staticClass:"circle"})]),s._v(" "),t("div",{staticClass:"gap-patch"},[t("div",{staticClass:"circle"})]),s._v(" "),t("div",{staticClass:"circle-clipper right"},[t("div",{staticClass:"circle"})])])}]}}});